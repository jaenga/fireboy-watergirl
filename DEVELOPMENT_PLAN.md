# Fireboy & Watergirl 게임 개발 계획서

## 개발 방향 및 단계별 계획

### 1단계: 기본 인프라 구축 (Foundation)

**목표**: 개발 환경과 핵심 시스템 준비

- **파일 구조 설계**
  - `src/`: 메인 소스 코드
  - `stages/`: 스테이지 맵 파일
  - `data/`: 랭킹, 설정 파일 등
  - 헤더 파일 분리 (`game.h`, `player.h`, `map.h` 등)

- **콘솔 환경 설정**
  - ANSI 색상 코드 지원 모듈
  - 화면 클리어, 커서 제어 유틸리티
  - 크로스 플랫폼 호환성 고려 (Windows/Linux)

- **입력 시스템**
  - 비동기 키 입력 처리 (2인 동시 조작)
  - 키 매핑 설정 (Fireboy: 방향키, Watergirl: WASD)

---

### 2단계: 맵 시스템 (Map System)

**목표**: 외부 파일에서 맵을 로드하고 표시

- **맵 파일 포맷 설계**
  - ASCII 문자 기반 타일 정의
  - 벽, 바닥, 불 지형, 물 지형, 상자, 스위치, 이동 발판 등
  - 맵 크기, 시작 위치, 목표 위치 정보 포함

- **맵 로더 구현**
  - 텍스트 파일 파싱
  - 맵 데이터를 메모리 구조체로 변환
  - 여러 스테이지 파일 관리

- **맵 렌더링**
  - 2D 배열 기반 화면 출력
  - 색상 적용
  - 카메라/뷰포트 시스템 (큰 맵의 경우)

---

### 3단계: 기본 게임 루프 (Game Loop - Basic)

**목표**: 최소한의 게임 루프 구성으로 테스트 가능한 환경 구축

- **메인 게임 루프 구조**
  - 입력 처리 → 업데이트 → 렌더링
  - 프레임 타이밍
  - 루프 종료 조건 (ESC 키 등)

- **기본 상태 관리**
  - 게임 실행 중, 종료 상태
  - 간단한 메뉴 전환

**중요**: 이 단계에서는 아직 물리나 복잡한 로직 없이 맵만 보이게 하는 것이 목표

---

### 4단계: 캐릭터 기본 이동 (Character Basic Movement)

**목표**: 중력 없이 평면 이동만 구현

- **캐릭터 구조 설계**
  - 위치 (x, y)
  - 속도 (vx, vy)
  - 상태 (생존/사망)
  - 속성 (불/물)

- **기본 이동 구현**
  - 좌우 이동 (키보드 입력에 따른 위치 변경)
  - 이동 범위 제한 (맵 경계)
  - 벽 충돌 (간단한 판정)

- **2인 동시 조작**
  - Fireboy (방향키)와 Watergirl (WASD) 분리 처리
  - 독립적인 위치 관리

**왜 이 순서인가?**: 중력 없이 평면 이동부터 구현하면 디버깅이 쉬움. 이동이 잘 되는지 확인 후 중력을 추가하는 것이 단계적 개발에 유리함.

---

### 5단계: 물리 및 충돌 시스템 (Physics & Collision)

**목표**: 중력, 점프, 정교한 충돌 처리

- **중력 시스템**
  - 수직 가속도
  - 바닥 충돌 판정
  - 지상/공중 상태 관리

- **점프 시스템**
  - 점프 입력 감지
  - 점프 힘 적용
  - 공중에서 점프 불가 처리

- **충돌 감지**
  - 타일 기반 충돌 (AABB)
  - 바닥, 천장, 벽 충돌
  - 충돌 반응 (위치 보정)

- **플레이어 상태 관리**
  - 공중/지상 상태
  - 속도 벡터 관리

---

### 6단계: 속성 지형 및 사망 시스템 (Attribute Terrain & Death)

**목표**: 불/물 속성 지형 처리 및 사망/리스폰

- **속성 지형 판정**
  - Fireboy: 불 지형 통과, 물 지형 접촉 시 사망
  - Watergirl: 물 지형 통과, 불 지형 접촉 시 사망
  - 지형 타일별 상호작용 로직

- **사망/리스폰 시스템**
  - 체크포인트 또는 시작 위치로 복귀
  - 사망 횟수 카운트

---

### 7단계: 게임 오브젝트 구현 (Game Objects - Sequential)

**목표**: 각 오브젝트를 하나씩 완성하며 테스트

#### 7-1. 상자 시스템
- 상자 위치/상태 관리
- 푸시/밀기 로직
- 충돌 처리 (플레이어, 벽)
- 스위치와의 상호작용

#### 7-2. 스위치/도어 시스템
- 스위치 활성화 조건
- 도어 열림/닫힘 로직
- 시각적 피드백

#### 7-3. 이동 발판
- 왕복 이동 로직
- 탑승 판정
- 발판 위에서 플레이어 이동

#### 7-4. 보석/수집품
- 수집 로직
- 점수 반영

**왜 세분화하는가?**: 한 번에 모든 오브젝트를 구현하면 디버깅이 어려움. 하나씩 완성하고 테스트하는 것이 효율적.

---

### 8단계: 게임플레이 시스템 (Gameplay Systems)

**목표**: 게임 완성도를 위한 시스템 구현

- **시간 제한 시스템**
  - 타이머 구현
  - 시간 초과 시 실패 처리

- **게임 상태 관리**
  - 플레이 중, 일시정지, 클리어, 실패
  - 상태 전환 로직

- **목표 달성 조건**
  - 스테이지 클리어 조건 (도어 도달 등)
  - 클리어 시 다음 스테이지 또는 게임 종료

---

### 9단계: HUD 및 UI (User Interface)

**목표**: 정보 표시와 사용자 인터페이스

- **HUD (Head-Up Display)**
  - 남은 시간
  - 사망 횟수
  - 현재 점수
  - 스테이지 번호

- **메뉴 시스템**
  - 메인 메뉴
  - 스테이지 선택
  - 일시정지 메뉴
  - 게임 오버/클리어 화면

- **시각적 피드백**
  - 애니메이션 (점프, 이동 등)
  - 효과 (사망, 수집 등)

---

### 10단계: 점수 및 랭킹 시스템 (Score & Ranking)

**목표**: 점수 계산과 랭킹 관리

- **점수 계산 시스템**
  - 클리어 시간 반영
  - 사망 횟수 반영
  - 보석 수집 보너스
  - 점수 공식 설계

- **랭킹 시스템**
  - 파일 기반 저장/로드
  - TOP-10 관리
  - 정렬 알고리즘 (정렬 라이브러리 활용)
  - 랭킹 화면 출력

- **데이터 영속성**
  - 랭킹 파일 형식 (텍스트/바이너리)
  - 파일 읽기/쓰기 에러 처리

---

### 11단계: 스테이지 제작 및 확장성 (Level Design)

**목표**: 다양한 스테이지 제작

- **스테이지 디자인**
  - 난이도 진행
  - 퍼즐 요소 조합

- **확장성 고려**
  - 맵 에디터 (선택사항)
  - 새로운 게임 오브젝트 추가 용이성

---

### 12단계: 최적화 및 폴리싱 (Optimization & Polish)

**목표**: 완성도 향상

- **버그 수정**
  - 충돌 판정 정밀화
  - 엣지 케이스 처리

- **성능 최적화**
  - 렌더링 최적화
  - 메모리 관리

- **사용자 경험 개선**
  - 부드러운 조작감
  - 명확한 피드백
  - 튜토리얼/도움말 (선택사항)

---

## 개선된 개발 순서 요약

### 최종 권장 순서

1. **1단계**: 기본 인프라 구축
2. **2단계**: 맵 시스템 (로더 + 렌더링)
3. **3단계**: 기본 게임 루프 (맵만 보이게)
4. **4단계**: 캐릭터 기본 이동 (평면 이동, 중력 없음)
5. **5단계**: 물리 및 충돌 시스템 (중력, 점프 추가)
6. **6단계**: 속성 지형 및 사망 시스템
7. **7-1단계**: 상자 시스템
8. **7-2단계**: 스위치/도어 시스템
9. **7-3단계**: 이동 발판
10. **7-4단계**: 보석/수집품
11. **8단계**: 게임플레이 시스템 (시간 제한, 클리어 조건)
12. **9단계**: HUD 및 UI
13. **10단계**: 점수 및 랭킹 시스템
14. **11단계**: 스테이지 제작
15. **12단계**: 최적화 및 폴리싱

---

## 핵심 설계 원칙

1. **점진적 개발**: 하나씩 완성하고 테스트하며 진행
2. **모듈화**: 기능별로 파일과 함수 분리
3. **데이터 중심**: 맵/설정을 파일로 관리
4. **확장 가능성**: 새 오브젝트/스테이지 추가 용이
5. **테스트 가능성**: 각 단계마다 실행 가능한 상태 유지


## 각 단계별 체크리스트

### 각 단계 완료 기준

- [ ] 1단계: 콘솔 환경 설정, 입력 시스템 테스트 성공
- [ ] 2단계: 맵 파일 로드 후 화면에 정상 출력
- [ ] 3단계: 게임 루프 실행, ESC로 종료 가능
- [ ] 4단계: 두 캐릭터가 키보드로 좌우 이동 가능
- [ ] 5단계: 중력, 점프, 벽 충돌 정상 작동
- [ ] 6단계: 속성 지형 통과/사망 정상 작동
- [ ] 7-1: 상자 밀기/정지 정상 작동
- [ ] 7-2: 스위치 활성화, 도어 열림 정상 작동
- [ ] 7-3: 이동 발판 위에서 플레이어 이동 가능
- [ ] 7-4: 보석 수집 및 점수 반영
- [ ] 8단계: 시간 제한, 클리어 조건 정상 작동
- [ ] 9단계: HUD, 메뉴 모두 정상 작동
- [ ] 10단계: 점수 계산, 랭킹 저장/로드 정상 작동
- [ ] 11단계: 여러 스테이지 플레이 가능
- [ ] 12단계: 버그 없이 부드럽게 플레이 가능

